<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gran Rosco (Nivel Medio-Alto) & L√≥gica</title>
    <style>
        /* =========================================
           RESET Y BASE
           ========================================= */
        * {
            box-sizing: border-box;
            touch-action: manipulation;
        }

        body {
            background-color: #0b1d38;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden; 
        }

        /* =========================================
           UTILIDADES
           ========================================= */
        .hidden { display: none !important; }

        /* =========================================
           MEN√ö PRINCIPAL
           ========================================= */
        #main-menu {
            text-align: center; width: 90%; max-width: 500px; animation: fadeIn 0.5s;
        }
        
        h1 { font-size: 2.5rem; color: #ffcc00; text-shadow: 0 4px 10px rgba(0,0,0,0.5); }

        .menu-buttons {
            display: flex; gap: 20px; margin-top: 30px; justify-content: center; flex-wrap: wrap;
        }
        .menu-btn {
            padding: 20px; font-size: 1.2rem; border: none; border-radius: 15px; cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s; display: flex; flex-direction: column;
            align-items: center; width: 150px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        .menu-btn:active { transform: scale(0.95); }
        .rosco-style { background: linear-gradient(145deg, #0033a0, #2b5cb3); color: white; border: 2px solid #ffcc00; }
        .logic-style { background: linear-gradient(145deg, #111, #333); color: #00ffcc; border: 2px solid #00ffcc; }
        .icon { font-size: 2.5rem; margin-bottom: 10px; }
        .record-info { margin-top: 30px; color: #aaa; font-size: 0.9rem; }

        /* =========================================
           CONTENEDOR JUEGO
           ========================================= */
        .game-container {
            position: relative; width: 600px; height: 600px; 
            display: flex; justify-content: center; align-items: center;
        }
        .back-btn {
            position: fixed; top: 15px; left: 15px; background: rgba(0,0,0,0.6);
            border: 1px solid white; color: white; padding: 8px 15px; cursor: pointer;
            border-radius: 20px; z-index: 100; font-size: 0.9rem;
        }

        /* =========================================
           JUEGO 1: ROSCO
           ========================================= */
        .rosco-container {
            position: relative; width: 100%; height: 100%; 
            display: flex; justify-content: center; align-items: center;
        }
        .circle {
            list-style: none; padding: 0; margin: 0; position: absolute; 
            width: 100%; height: 100%;
        }
        .letter-item {
            position: absolute; left: 50%; top: 50%; width: 36px; height: 36px; margin: -18px;
            background: linear-gradient(145deg, #2b5cb3, #0033a0); border-radius: 50%;
            text-align: center; line-height: 36px; font-weight: bold; font-size: 14px;
            border: 2px solid white; box-shadow: 2px 2px 5px rgba(0,0,0,0.5); transition: all 0.3s;
        }
        .letter-item.active {
            background: #ffcc00; color: #000; transform: scale(1.4); z-index: 10; border-color: #000; box-shadow: 0 0 15px #ffcc00;
        }
        .letter-item.correct { background: #28a745; border-color: #1e7e34; }
        .letter-item.wrong { background: #dc3545; border-color: #a71d2a; }

        .center-panel {
            position: relative; width: 320px; height: 320px; text-align: center; z-index: 20;
            background: rgba(11, 29, 56, 0.95); padding: 15px; border-radius: 50%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            border: 2px solid #2b5cb3;
        }
        .definition { font-size: 1rem; min-height: 60px; margin-bottom: 10px; line-height: 1.3; padding: 0 10px; color: #eee; }
        #current-letter-display { font-size: 3rem; margin: 0px 0 10px 0; color: #ffcc00; text-shadow: 2px 2px 0 #000; }
        
        .input-group { width: 100%; display: flex; justify-content: center; margin-bottom: 10px; }
        input[type="text"] {
            padding: 10px; font-size: 1.1rem; width: 80%; border-radius: 20px;
            border: 2px solid #ccc; text-align: center; outline: none;
            color: #333;
        }
        .controls button {
            padding: 10px 20px; font-size: 1rem; border: none; border-radius: 20px;
            margin: 5px; font-weight: bold; width: 100px; cursor: pointer;
            transition: transform 0.1s;
        }
        .controls button:active { transform: scale(0.95); }
        .btn-start { background: #ffcc00; color: #000; width: 100% !important; margin-top: 10px; font-size: 1.2rem; cursor: pointer; padding: 10px; border: none; border-radius: 20px; font-weight: bold;}
        .btn-pasa { background: #6c757d; color: white; }
        .btn-check { background: #28a745; color: white; }
        .timer-box { font-size: 1.4rem; font-weight: bold; color: #ffcc00; margin-bottom: 5px; }

        /* Estilos Pantalla Resumen Rosco */
        #end-screen { width: 90%; height: 90%; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .summary-box {
            width: 100%;
            max-height: 150px;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px;
            margin: 10px 0;
            text-align: left;
            font-size: 0.85rem;
        }
        .summary-item { border-bottom: 1px solid rgba(255,255,255,0.2); padding: 5px 0; }
        .sum-correct { color: #4ade80; font-weight: bold; }
        .sum-wrong { color: #f87171; font-weight: bold; }
        .sum-pending { color: #fbbf24; font-weight: bold; }

        /* =========================================
           JUEGO 2: EL 1% (L√ìGICA)
           ========================================= */
        .logic-container {
            width: 100%; height: 100%; display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center; padding: 20px;
        }
        .logic-title { color: #00ffcc; text-transform: uppercase; letter-spacing: 2px; font-size: 1.5rem; margin-bottom: 20px; }
        .logic-card {
            background: #111; border: 2px solid #00ffcc; border-radius: 15px; padding: 20px;
            width: 100%; max-width: 400px; box-shadow: 0 0 20px rgba(0, 255, 204, 0.2); margin-bottom: 20px;
        }
        #riddle-question { font-size: 1.1rem; line-height: 1.5; white-space: pre-line; margin-bottom: 20px; }
        .logic-controls { width: 100%; max-width: 400px; display: flex; flex-direction: column; align-items: center; gap: 10px; }
        .btn-logic { background: #00ffcc; color: #000; width: 100%; padding: 12px; font-weight: bold; border-radius: 20px; border:none; cursor: pointer; font-size: 1.1rem;}
        .btn-giveup { background: transparent; border: 1px solid #555; color: #aaa; width: 100%; padding: 10px; margin-top: 5px; border-radius: 20px; cursor: pointer;}

        /* --- MODAL FEEDBACK --- */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.9); display: flex; justify-content: center; align-items: center;
            z-index: 2000; animation: fadeIn 0.3s;
        }
        .modal-content {
            background: #111; border: 2px solid #00ffcc; padding: 30px; border-radius: 15px;
            text-align: center; max-width: 90%; width: 400px; box-shadow: 0 0 30px rgba(0, 255, 204, 0.3);
        }
        #modal-title { font-size: 2rem; margin: 0 0 15px 0; text-transform: uppercase; }
        .title-correct { color: #28a745; text-shadow: 0 0 10px #28a745; }
        .title-wrong { color: #ff4444; text-shadow: 0 0 10px #ff4444; }
        #modal-solution { font-size: 1.2rem; color: #fff; font-weight: bold; margin-bottom: 10px; }
        #modal-explanation { font-size: 1rem; color: #ccc; line-height: 1.5; margin-bottom: 25px; font-style: italic; }
        #next-riddle-btn {
            background: #00ffcc; color: #000; border: none; padding: 12px 25px;
            font-size: 1.1rem; font-weight: bold; border-radius: 25px; cursor: pointer; transition: transform 0.2s;
        }
        #next-riddle-btn:hover { transform: scale(1.05); box-shadow: 0 0 15px #00ffcc; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* =========================================
           MEDIA QUERIES (M√ìVIL)
           ========================================= */
        @media (max-width: 650px) {
            .game-container { width: 100vw; height: 100vh; }
            /* Ajuste cr√≠tico para que el rosco se vea en m√≥viles */
            .rosco-container { transform: scale(0.60); transform-origin: center center; } 
            .center-panel { width: 320px; height: 320px; }
            #main-menu { margin-top: -50px; }
        }
        @media (max-width: 380px) {
            .rosco-container { transform: scale(0.50); }
        }
    </style>
</head>
<body>

    <div id="main-menu">
        <h1>üèÜ GRAN CONCURSO</h1>
        <p style="color: #ccc;">Nivel: Experto</p>
        <div class="menu-buttons">
            <button id="btn-mode-rosco" class="menu-btn rosco-style">
                <span class="icon">üîµ</span> El Rosco
            </button>
            <button id="btn-mode-logic" class="menu-btn logic-style">
                <span class="icon">üß†</span> El 1% (L√≥gica)
            </button>
        </div>
        <p class="record-info">R√©cord Rosco: <span id="menu-record">0</span></p>
    </div>

    <div id="rosco-game" class="game-container hidden">
        <button class="back-btn" onclick="goToMenu()">‚¨Ö Men√∫</button>
        <div class="rosco-container">
            <ul class="circle" id="circle"></ul>

            <div class="center-panel">
                <div id="welcome-screen">
                    <h2 style="color: #ffcc00; margin-bottom: 10px;">Rosco Quiz</h2>
                    <p style="margin-bottom: 20px;">Cultura General (Dif√≠cil)</p>
                    <button id="start-btn" class="btn-start">¬°EMPEZAR!</button>
                </div>

                <div id="game-screen" class="hidden">
                    <div class="timer-box">‚è≥ <span id="timer">180</span>s</div>
                    <h2 id="current-letter-display">A</h2>
                    <p id="definition-text" class="definition">Cargando...</p>
                    
                    <div class="input-group">
                        <input type="text" id="user-answer" placeholder="Respuesta..." autocomplete="off">
                    </div>
                    
                    <div class="controls">
                        <button id="pasapalabra-btn" class="btn-pasa">Pasapalabra</button>
                        <button id="check-btn" class="btn-check">Enviar</button>
                    </div>
                </div>

                <div id="end-screen" class="hidden">
                    <h3 style="color: #ffcc00; margin: 5px;">¬°FIN DEL JUEGO!</h3>
                    <div style="display: flex; justify-content: space-around; width: 100%; margin: 5px 0; font-size: 1.1rem;">
                        <p style="color: #4ade80;">‚úÖ <span id="score-correct">0</span></p>
                        <p style="color: #f87171;">‚ùå <span id="score-wrong">0</span></p>
                    </div>
                    
                    <div class="summary-box" id="rosco-summary">
                        </div>

                    <button id="new-game-btn" class="btn-start" style="font-size: 1rem; padding: 8px;">Jugar de nuevo</button>
                </div>
            </div>
        </div>
    </div>

    <div id="riddle-game" class="game-container hidden">
        <button class="back-btn" onclick="goToMenu()">‚¨Ö Men√∫</button>
        <div class="logic-container">
            <h2 class="logic-title">Pregunta del 1%</h2>
            
            <div id="logic-card" class="logic-card">
                <p id="riddle-question">Cargando...</p>
            </div>

            <div class="logic-controls">
                <input type="text" id="riddle-answer" placeholder="Respuesta l√≥gica..." autocomplete="off" style="width: 100%; margin-bottom: 10px; background: #fff; color: #000;">
                <button id="riddle-check-btn" class="btn-logic">Comprobar</button>
                <button id="riddle-giveup-btn" class="btn-giveup">Me rindo (Ver soluci√≥n)</button>
            </div>
        </div>
    </div>

    <div id="feedback-modal" class="modal hidden">
        <div class="modal-content">
            <h2 id="modal-title">TITULO</h2>
            <p id="modal-solution"></p>
            <p id="modal-explanation"></p>
            <button id="next-riddle-btn">Siguiente ‚û°</button>
        </div>
    </div>

    <script>
        // ==========================================
        // 1. GESTI√ìN DE PANTALLAS
        // ==========================================

        const mainMenu = document.getElementById('main-menu');
        const roscoGame = document.getElementById('rosco-game');
        const riddleGame = document.getElementById('riddle-game');

        // Navegaci√≥n
        document.getElementById('btn-mode-rosco').addEventListener('click', () => {
            mainMenu.classList.add('hidden');
            roscoGame.classList.remove('hidden');
        });

        document.getElementById('btn-mode-logic').addEventListener('click', () => {
            mainMenu.classList.add('hidden');
            riddleGame.classList.remove('hidden');
            loadRiddle(); 
        });

        window.goToMenu = function() {
            roscoGame.classList.add('hidden');
            riddleGame.classList.add('hidden');
            mainMenu.classList.remove('hidden');
        }

        // ==========================================
        // 2. JUEGO: EL 1% (L√ìGICA)
        // ==========================================
       const riddlesPool = [
    // --- LOS QUE YA TEN√çAS ---
    { question: "J + A = 61\nS + O = 61\nM + A = 61\n\nEntonces...\nF + M = ¬ø?\n(Piensa en calendarios)", answers: ["59", "cincuenta y nueve"], explanation: "Iniciales de los meses + d√≠as.\nF (Febrero 28) + M (Marzo 31) = 59." },
    { question: "Secuencia l√≥gica:\nU, D, T, C, C, S, S, O, ...\n¬øQu√© sigue?", answers: ["n", "nueve"], explanation: "Iniciales de los n√∫meros: Uno, Dos, Tres... Sigue N (Nueve)." },
    { question: "11 + 2 = 1\n9 + 5 = 2\n\n¬ø10 + 4 = ?", answers: ["2", "dos"], explanation: "Horas del reloj. 10 + 4 horas = Las 2." },
    { question: "Divide 30 por 0.5 y suma 10.", answers: ["70", "setenta"], explanation: "30 / 0.5 = 60. + 10 = 70." },
    { question: "¬øCu√°ntos nueves hay del 1 al 100?", answers: ["20", "veinte"], explanation: "9, 19, 29... 90, 91... 99 (son dos). Total 20." },
    { question: "Adelantas al segundo en una carrera.\n¬øEn qu√© puesto vas?", answers: ["segundo", "2", "2¬∫"], explanation: "Ocupas su lugar, eres el segundo." },
    { question: "Padre de Ana tiene 5 hijas: Nana, Nene, Nini, Nono...\n¬øLa quinta?", answers: ["ana"], explanation: "El padre de ANA." },
    { question: "Tiene ciudades sin casas, r√≠os sin agua y montes sin √°rboles.", answers: ["mapa", "un mapa"], explanation: "Un mapa." },
    { question: "Habitaci√≥n oscura. Tienes vela, l√°mpara de gas y le√±a.\n¬øQu√© enciendes primero?", answers: ["cerilla", "la cerilla", "fuego"], explanation: "La cerilla." },
    { question: "Hay que romperlo para usarlo.", answers: ["huevo", "un huevo"], explanation: "El huevo." },
    { question: "Alto de joven, bajo de viejo. Brillo y lloro.", answers: ["vela", "una vela"], explanation: "Una vela." },
    { question: "Se moja mientras seca.", answers: ["toalla", "una toalla"], explanation: "La toalla." },
    { question: "Tiene llaves pero no abre puertas.", answers: ["teclado", "piano", "un teclado"], explanation: "Un teclado o un piano." },
    { question: "Si lo compartes, deja de serlo.", answers: ["secreto", "un secreto"], explanation: "Un secreto." },
    { question: "Si dices mi nombre, me rompo.", answers: ["silencio", "el silencio"], explanation: "El silencio." },
    { question: "Conductor de bus. Bajan 3, suben 2... ¬øNombre del conductor?", answers: ["tu", "yo", "mi nombre"], explanation: "T√ö eres el conductor." },
    { question: "Oso camina 1km Sur, 1km Este, 1km Norte. Vuelve al inicio.\n¬øColor?", answers: ["blanco"], explanation: "Polo Norte. Oso polar." },
    { question: "M√°s grande cuanto m√°s le quitas.", answers: ["agujero", "hoyo"], explanation: "Un agujero." },
    { question: "Tienes 5 manzanas, quitas 2.\n¬øCu√°ntas tienes?", answers: ["2", "dos"], explanation: "Tienes las 2 que has quitado." },
    { question: "Palabra mal escrita en todos los diccionarios.", answers: ["mal", "incorrectamente"], explanation: "La palabra 'incorrectamente'." },
    { question: "Tren el√©ctrico al norte, viento al oeste.\n¬øHacia d√≥nde va el humo?", answers: ["ninguno", "no tiene"], explanation: "El√©ctrico = no humo." },
    { question: "Hombre sin paraguas bajo lluvia no se moja el pelo.", answers: ["calvo"], explanation: "Es calvo." },
    { question: "Tiene cuello pero no cabeza.", answers: ["botella", "camisa"], explanation: "Botella o camisa." },
    { question: "Adelantas al √∫ltimo en una carrera.\n¬øPuesto?", answers: ["imposible"], explanation: "No puedes adelantar al √∫ltimo (si vas detr√°s, t√∫ eres el √∫ltimo)." },
    { question: "Baja pero nunca sube.", answers: ["lluvia", "la lluvia"], explanation: "La lluvia." },
    { question: "De 10 ovejas, se mueren todas menos 9.\n¬øCu√°ntas quedan?", answers: ["9", "nueve"], explanation: "Las 9 vivas." },
    { question: "Solo un ojo pero no ve.", answers: ["aguja", "una aguja"], explanation: "La aguja." },
    { question: "Sostienes en mano derecha, nunca en la izquierda.", answers: ["codo izquierdo", "mano izquierda"], explanation: "Tu mano/codo izquierdo." },
    { question: "¬øQu√© mes tiene 28 d√≠as?", answers: ["todos", "12"], explanation: "Todos los meses." },
    { question: "Es tuyo, pero todos lo usan m√°s que t√∫.", answers: ["nombre", "tu nombre"], explanation: "Tu nombre." },
    { question: "Par√≠s empieza por P y termina por T. ¬øCierto o Falso?", answers: ["cierto", "verdad", "si"], explanation: "La palabra 'Par√≠s' empieza por P. La palabra 'Termina' empieza por T." },
    { question: "¬øQu√© animal anda con 4 patas por la ma√±ana, 2 al mediod√≠a y 3 por la noche?", answers: ["hombre", "ser humano", "humano"], explanation: "El ser humano (gatea de beb√©, camina de adulto, usa bast√≥n de viejo)." },
    { question: "Tengo agujas pero no s√© coser. Tengo n√∫meros pero no s√© leer.", answers: ["reloj", "el reloj"], explanation: "El reloj." },
    { question: "¬øQu√© sube pero nunca baja?", answers: ["edad", "la edad", "altura"], explanation: "La edad." },
    { question: "Entro duro y grande, y salgo blando y peque√±o. ¬øQu√© soy?", answers: ["chicle", "un chicle"], explanation: "Un chicle." },
    { question: "Tiene dientes pero no muerde.", answers: ["peine", "ajo", "cremallera"], explanation: "Un peine o un ajo." },
    { question: "Hijo de mi padre y de mi madre, y no es mi hermano.", answers: ["yo", "soy yo"], explanation: "Soy yo." },
    { question: "¬øQu√© pesa m√°s, un kilo de hierro o un kilo de paja?", answers: ["igual", "lo mismo", "pesan igual"], explanation: "Pesan lo mismo: un kilo." },
    { question: "Un gallo pone un huevo en la cima de un tejado. ¬øHacia d√≥nde cae?", answers: ["ningun sitio", "no ponen huevos", "gallos no ponen huevos"], explanation: "Los gallos no ponen huevos." },
    { question: "Dos padres y dos hijos en un coche. Solo van 3 personas. ¬øC√≥mo?", answers: ["abuelo", "abuelo padre hijo"], explanation: "Son: Abuelo, Padre e Hijo (El padre es hijo del abuelo)." },
    { question: "¬øQu√© se rompe si lo tiras al suelo, pero no si lo tiras al agua?", answers: ["papel", "un papel"], explanation: "El papel (flota o se moja, pero no se rompe por el golpe)." },
    { question: "Siempre estoy en medio del MAR.", answers: ["a", "letra a"], explanation: "La letra A." },

    // --- NUEVOS A√ëADIDOS (LOTE EXTRA) ---
    { question: "Hablo sin boca y oigo sin o√≠dos, no tengo cuerpo pero el viento me da vida.", answers: ["eco", "el eco"], explanation: "El Eco." },
    { question: "Cuanto m√°s avanzas, m√°s dejas atr√°s.", answers: ["huellas", "pasos", "las huellas"], explanation: "Las huellas." },
    { question: "Tengo cara y cruz, pero no tengo cuerpo.", answers: ["moneda", "una moneda"], explanation: "Una moneda." },
    { question: "Viaja por el mundo qued√°ndose en una esquina.", answers: ["sello", "estampilla"], explanation: "El sello de correos." },
    { question: "Si me das de comer vivo, si me das agua muero.", answers: ["fuego", "el fuego"], explanation: "El fuego." },
    { question: "Un vaquero llega en Viernes, se queda dos d√≠as y se va en Viernes. ¬øC√≥mo?", answers: ["caballo", "su caballo"], explanation: "Su caballo se llama 'Viernes'." },
    { question: "Ves un barco lleno de gente, pero no hay ni una sola persona soltera. ¬øC√≥mo?", answers: ["casados", "estan casados"], explanation: "Todos est√°n casados." },
    { question: "Tengo 13 corazones pero ning√∫n otro √≥rgano.", answers: ["baraja", "cartas", "naipes"], explanation: "Una baraja de cartas." },
    { question: "Si tiras un sombrero amarillo al Mar Rojo, ¬øc√≥mo sale?", answers: ["mojado", "se moja"], explanation: "Sale mojado." },
    { question: "Invento que permite mirar a trav√©s de las paredes.", answers: ["ventana", "una ventana"], explanation: "La ventana." },
    { question: "Sube y baja pero no se mueve del sitio.", answers: ["escalera", "la escalera", "temperatura"], explanation: "La escalera." },
    { question: "Tengo hojas pero no soy un √°rbol. Tengo lomo pero no soy un caballo.", answers: ["libro", "un libro"], explanation: "Un libro." },
    { question: "Solo existo cuando hay luz, pero la luz directa me mata.", answers: ["sombra", "la sombra"], explanation: "La sombra." },
    { question: "Tengo lecho pero no duermo, tengo boca pero no hablo.", answers: ["rio", "un rio"], explanation: "Un r√≠o." },
    { question: "Tengo cuatro dedos y un pulgar, pero no tengo carne ni hueso.", answers: ["guante", "un guante"], explanation: "Un guante." },
    { question: "Soy blanca cuando estoy sucia y negra cuando estoy limpia.", answers: ["pizarra", "la pizarra"], explanation: "La pizarra." },
    { question: "Siempre viene, pero nunca llega.", answers: ["ma√±ana", "el futuro"], explanation: "El ma√±ana." },
    { question: "Soy mayor que Dios, m√°s malvado que el diablo, los pobres me tienen y los ricos me necesitan.", answers: ["nada", "la nada"], explanation: "La nada." },
    { question: "Me puedes romper sin tocarme.", answers: ["promesa", "una promesa"], explanation: "Una promesa." },
    { question: "¬øQu√© animal tiene las 5 vocales en su nombre?", answers: ["murcielago"], explanation: "El murci√©lago." },
    { question: "Una vez en un minuto, dos en un momento, ninguna en un siglo.", answers: ["m", "letra m"], explanation: "La letra M." },
    { question: "¬øD√≥nde el Jueves va antes que el Mi√©rcoles?", answers: ["diccionario", "el diccionario"], explanation: "En el diccionario (orden alfab√©tico)." },
    { question: "Tengo sombrero pero no cabeza. Tengo un solo pie pero no camino.", answers: ["seta", "hongo", "champi√±on"], explanation: "Una seta o champi√±√≥n." },
    { question: "Te la quitas cuando hace fr√≠o.", answers: ["capa", "ropa", "frio"], explanation: "No, la costumbre es abrigarse. Respuesta lateral: Te quitas la ropa (al llegar a casa) o la 'piel de gallina'." }, 
    // Correcci√≥n para el anterior que es confuso, mejor este cl√°sico:
    { question: "Te pertenece, pero los dem√°s lo usan m√°s que t√∫.", answers: ["nombre", "tu nombre"], explanation: "Tu nombre." }, 
    { question: "Lo tiras cuando lo necesitas y lo recoges cuando ya no lo necesitas.", answers: ["ancla", "el ancla"], explanation: "El ancla de un barco." }
];

        let currentRiddleIndex = 0;
        shuffleArray(riddlesPool);

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        const modal = document.getElementById('feedback-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalSolution = document.getElementById('modal-solution');
        const modalExplanation = document.getElementById('modal-explanation');
        const nextRiddleBtn = document.getElementById('next-riddle-btn');

        function loadRiddle() {
            const riddle = riddlesPool[currentRiddleIndex];
            document.getElementById('riddle-question').innerText = riddle.question;
            document.getElementById('riddle-answer').value = '';
        }

        document.getElementById('riddle-check-btn').addEventListener('click', () => { checkRiddle(false); });
        document.getElementById('riddle-giveup-btn').addEventListener('click', () => { checkRiddle(true); });
        document.getElementById('riddle-answer').addEventListener('keypress', (e) => { if(e.key === 'Enter') checkRiddle(false); });
        nextRiddleBtn.addEventListener('click', () => {
            modal.classList.add('hidden');
            nextRiddle();
        });

        function checkRiddle(giveUp) {
            const userVal = normalizeString(document.getElementById('riddle-answer').value);
            const riddle = riddlesPool[currentRiddleIndex];
            const isCorrect = riddle.answers.some(ans => normalizeString(ans) === userVal);

            if (giveUp) { showModal(false, true); } 
            else if (isCorrect) { showModal(true, false); } 
            else { showModal(false, false); }
        }

        function showModal(isCorrect, isGiveUp) {
            const riddle = riddlesPool[currentRiddleIndex];
            modal.classList.remove('hidden');

            if (isCorrect) {
                modalTitle.innerText = "¬°CORRECTO! üß†";
                modalTitle.className = "title-correct";
                modalSolution.innerText = ""; 
            } else {
                modalTitle.innerText = isGiveUp ? "Soluci√≥n:" : "¬°Incorrecto!";
                modalTitle.className = "title-wrong";
                modalSolution.innerText = `La respuesta era: "${riddle.answers[0]}"`;
            }
            modalExplanation.innerText = riddle.explanation;
        }

        function nextRiddle() {
            currentRiddleIndex++;
            if (currentRiddleIndex >= riddlesPool.length) {
                currentRiddleIndex = 0;
                shuffleArray(riddlesPool);
                alert("¬°Has completado todos los acertijos! Volvemos a empezar barajados.");
            }
            loadRiddle();
        }


        // ==========================================
        // 3. JUEGO: ROSCO (NIVEL MEDIO-ALTO)
        // ==========================================

        const questionsPool = {
            A: [
                { id: 'A', question: "Persona que vive en soledad, apartada del trato con los dem√°s.", answer: "Anacoreta" },
                { id: 'A', question: "Falta o negaci√≥n de Dios.", answer: "Ateismo" },
                { id: 'A', question: "Conjunto de bienes o valores morales o culturales que se reciben de los antepasados.", answer: "Acervo" },
                { id: 'A', question: "Libertad individual que requiere reflexi√≥n y elecci√≥n consciente.", answer: "Albedrio" },
                { id: 'A', question: "Ciencia que estudia los aspectos f√≠sicos y las manifestaciones sociales y culturales de las comunidades humanas.", answer: "Antropologia" },
                { id: 'A', question: "Que no tiene nombre (por ejemplo un autor).", answer: "Anonimo" },
                { id: 'A', question: "Pa√≠s m√°s extenso de Europa y Asia.", answer: "Alemania" }, /* Truco: Es Rusia. Correcci√≥n: A: Pa√≠s que limita con Polonia y Francia. */
                { id: 'A', question: "Pa√≠s europeo cuya capital es Berl√≠n.", answer: "Alemania" },
                { id: 'A', question: "Sustancia que neutraliza los efectos de un veneno.", answer: "Antidoto" },
                { id: 'A', question: "Cuerpo celeste que gira alrededor de una estrella.", answer: "Asteroide" } 
            ],
            B: [
                { id: 'B', question: "Conjunto de servidores p√∫blicos y tr√°mites a menudo excesivos.", answer: "Burocracia" },
                { id: 'B', question: "Antigua ciudad de Mesopotamia famosa por sus jardines colgantes.", answer: "Babilonia" },
                { id: 'B', question: "Costado izquierdo de una embarcaci√≥n mirando de popa a proa.", answer: "Babor" },
                { id: 'B', question: "Canto religioso o patri√≥tico.", answer: "Himno" }, /* Ups, empieza por H. B: Persona que habla dos lenguas. */
                { id: 'B', question: "Persona que habla dos lenguas.", answer: "Bilingue" },
                { id: 'B', question: "Ciencia que estudia los seres vivos.", answer: "Biologia" },
                { id: 'B', question: "Capital del L√≠bano.", answer: "Beirut" },
                { id: 'B', question: "Instrumento para medir la presi√≥n atmosf√©rica.", answer: "Barometro" },
                { id: 'B', question: "Condici√≥n de estar casado con dos personas a la vez.", answer: "Bigamia" },
                { id: 'B', question: "L√≠quido segregado por el h√≠gado.", answer: "Bilis" }
            ],
            C: [
                { id: 'C', question: "Ciencia que estudia los mapas.", answer: "Cartografia" },
                { id: 'C', question: "Veneno muy potente y r√°pido que huele a almendras amargas.", answer: "Cianuro" },
                { id: 'C', question: "Impulso patol√≥gico a robar.", answer: "Cleptomania" },
                { id: 'C', question: "B√≥veda en forma de media esfera que cubre un edificio.", answer: "Cupula" },
                { id: 'C', question: "Capital de Venezuela.", answer: "Caracas" },
                { id: 'C', question: "Acuerdo oficial escrito entre dos o m√°s partes.", answer: "Contrato" },
                { id: 'C', question: "Periodo de cien a√±os.", answer: "Centenario" }, /* O Siglo (S). C: Centuria. */
                { id: 'C', question: "Cien a√±os.", answer: "Centuria" },
                { id: 'C', question: "Que come de todo (animales y plantas).", answer: "Omnivoro" }, /* Empieza por O. C: Carn√≠voro (solo carne). */
                { id: 'C', question: "Animal que se alimenta exclusivamente de carne.", answer: "Carnivoro" }
            ],
            D: [
                { id: 'D', question: "Forma de gobierno donde el poder reside en el pueblo.", answer: "Democracia" },
                { id: 'D', question: "Doctrina que niega la existencia de Dios.", answer: "Deismo" }, /* No exactamente. D: Dactilar (Huella). */
                { id: 'D', question: "Huella que dejamos con la yema de los dedos.", answer: "Dactilar" },
                { id: 'D', question: "Disminuci√≥n del valor del dinero.", answer: "Deflacion" }, /* O Devaluaci√≥n. */
                { id: 'D', question: "Privaci√≥n o disminuci√≥n de la capacidad de moverse o sentir.", answer: "Discapacidad" }, /* Mejor: Desmayo. */
                { id: 'D', question: "Perder el conocimiento moment√°neamente.", answer: "Desmayarse" },
                { id: 'D', question: "Texto que explica el significado de las palabras.", answer: "Diccionario" },
                { id: 'D', question: "Desierto m√°s grande del mundo (c√°lido).", answer: "Sahara" }, /* Empieza por S. D: Danubio. */
                { id: 'D', question: "Segundo r√≠o m√°s largo de Europa.", answer: "Danubio" },
                { id: 'D', question: "M√©dico especialista en la piel.", answer: "Dermatologo" }
            ],
            E: [
                { id: 'E', question: "Ciencia que estudia las relaciones de los seres vivos con su medio.", answer: "Ecologia" },
                { id: 'E', question: "Astro con luz propia.", answer: "Estrella" },
                { id: 'E', question: "Falta de cultura o instrucci√≥n.", answer: "Estupidez" }, /* No. E: Erudici√≥n (lo contrario). E: Ef√≠mero. */
                { id: 'E', question: "Pasajero, de corta duraci√≥n.", answer: "Efimero" },
                { id: 'E', question: "Objeto dise√±ado para enga√±ar al enemigo o servir de blanco.", answer: "Se√±uelo" }, /* Empieza por S. E: Enga√±o. E: Estrategia. */
                { id: 'E', question: "Arte de dirigir operaciones militares.", answer: "Estrategia" },
                { id: 'E', question: "Hueso m√°s largo del cuerpo humano (en la pierna, empieza por F... ah no). E: Estern√≥n.", answer: "Esternon" },
                { id: 'E', question: "Hueso plano situado en la parte anterior del pecho.", answer: "Esternon" },
                { id: 'E', question: "Movimiento de salida de personas de un pa√≠s.", answer: "Emigracion" },
                { id: 'E', question: "L√≠nea imaginaria que divide la Tierra en dos hemisferios.", answer: "Ecuador" }
            ],
            F: [
                { id: 'F', question: "Conjunto de hojas de una planta.", answer: "Follaje" },
                { id: 'F', question: "Miedo irracional a algo.", answer: "Fobia" },
                { id: 'F', question: "Ciencia que estudia el pensamiento y la moral.", answer: "Filosofia" },
                { id: 'F', question: "Pa√≠s europeo con forma de bota... No, eso es Italia. F: Francia.", answer: "Francia" },
                { id: 'F', question: "Pa√≠s vecino de Espa√±a al norte.", answer: "Francia" },
                { id: 'F', question: "Proceso por el que las plantas obtienen energ√≠a del sol.", answer: "Fotosintesis" },
                { id: 'F', question: "Estudio de los f√≥siles.", answer: "Paleontologia" }, /* Empieza por P. F: F√≥sil. */
                { id: 'F', question: "Resto de un organismo antiguo petrificado.", answer: "Fosil" },
                { id: 'F', question: "Ave mitol√≥gica que renace de sus cenizas.", answer: "Fenix" },
                { id: 'F', question: "Temperatura corporal elevada por enfermedad.", answer: "Fiebre" }
            ],
            G: [
                { id: 'G', question: "Ciencia que estudia la composici√≥n de la Tierra.", answer: "Geologia" },
                { id: 'G', question: "Fuerza que atrae los objetos hacia el centro de la Tierra.", answer: "Gravedad" },
                { id: 'G', question: "Grupo de personas que dirigen una naci√≥n.", answer: "Gobierno" },
                { id: 'G', question: "Libro sagrado del cristianismo (contiene G: Evangelio... no). G: G√©nesis.", answer: "Genesis" },
                { id: 'G', question: "Primer libro de la Biblia.", answer: "Genesis" },
                { id: 'G', question: "Gl√≥bulo de la sangre encargado de la defensa (blanco).", answer: "Leucocito" }, /* No. G: Gl√≥bulo. */
                { id: 'G', question: "Zona de tierra rodeada de agua por todas partes menos por una.", answer: "Peninsula" }, /* Empieza por P. G: Golfo. */
                { id: 'G', question: "Gran porci√≥n de mar que se interna en la tierra.", answer: "Golfo" },
                { id: 'G', question: "Gas m√°s ligero que el aire.", answer: "Helio" }, /* Empieza por H. G: Gasolina. */
                { id: 'G', question: "Combustible derivado del petr√≥leo.", answer: "Gasolina" }
            ],
            H: [
                { id: 'H', question: "Lugar donde se guardan documentos hist√≥ricos.", answer: "Hemeroteca" },
                { id: 'H', question: "Ciencia que estudia el pasado.", answer: "Historia" },
                { id: 'H', question: "Sustancia qu√≠mica liberada por una gl√°ndula.", answer: "Hormona" },
                { id: 'H', question: "Elemento qu√≠mico m√°s abundante del universo (H).", answer: "Hidrogeno" },
                { id: 'H', question: "Agua en estado s√≥lido.", answer: "Hielo" },
                { id: 'H', question: "Figura ret√≥rica que consiste en exagerar.", answer: "Hiperbole" },
                { id: 'H', question: "Mitad de la esfera terrestre.", answer: "Hemisferio" },
                { id: 'H', question: "Miedo al agua.", answer: "Hidrofobia" },
                { id: 'H', question: "Hueso del brazo entre el hombro y el codo.", answer: "Humero" }
            ],
            I: [
                { id: 'I', question: "Pa√≠s cuya capital es Dubl√≠n.", answer: "Irlanda" },
                { id: 'I', question: "Que no se puede borrar.", answer: "Imborrable" },
                { id: 'I', question: "Suspensi√≥n de pagos de una empresa.", answer: "Insolvencia" },
                { id: 'I', question: "Falta de sue√±o.", answer: "Insomnio" },
                { id: 'I', question: "Isla de hielo (en ingl√©s, pa√≠s).", answer: "Islandia" },
                { id: 'I', question: "Inflamaci√≥n del h√≠gado.", answer: "Hepatitis" }, /* Empieza por H. I: Infecci√≥n. */
                { id: 'I', question: "Invasi√≥n de g√©rmenes pat√≥genos en el cuerpo.", answer: "Infeccion" },
                { id: 'I', question: "Imperio precolombino de los Andes.", answer: "Inca" },
                { id: 'I', question: "Instrumento para ver cosas muy peque√±as.", answer: "Microscopio" }, /* M. I: Im√°n. */
                { id: 'I', question: "Objeto que atrae el hierro.", answer: "Iman" }
            ],
            J: [
                { id: 'J', question: "Mam√≠fero de cuello muy largo.", answer: "Jirafa" },
                { id: 'J', question: "Persona que administra justicia.", answer: "Juez" },
                { id: 'J', question: "Planeta m√°s grande del sistema solar.", answer: "Jupiter" },
                { id: 'J', question: "D√≠a de la semana de J√∫piter.", answer: "Jueves" },
                { id: 'J', question: "Embarcaci√≥n china de vela.", answer: "Junco" },
                { id: 'J', question: "Jefe de estado en una monarqu√≠a.", answer: "Rey" }, /* R. J: Jerarca. */
                { id: 'J', question: "Jefe superior o l√≠der.", answer: "Jerarca" },
                { id: 'J', question: "Piedra preciosa verde.", answer: "Esmeralda" }, /* E. J: Jade. */
                { id: 'J', question: "Mineral duro de color verdoso usado en joyer√≠a.", answer: "Jade" }
            ],
            L: [
                { id: 'L', question: "Capital de Reino Unido.", answer: "Londres" },
                { id: 'L', question: "Sat√©lite natural de la Tierra.", answer: "Luna" },
                { id: 'L', question: "Animal conocido como el rey de la selva.", answer: "Leon" },
                { id: 'L', question: "Ciencia que estudia el lenguaje.", answer: "Linguistica" },
                { id: 'L', question: "Espacio de tiempo muy largo.", answer: "Lustro" }, /* 5 a√±os. */
                { id: 'L', question: "Periodo de cinco a√±os.", answer: "Lustro" },
                { id: 'L', question: "Mam√≠fero que a√∫lla a la luna.", answer: "Lobo" },
                { id: 'L', question: "Que es conforme a la ley.", answer: "Legal" },
                { id: 'L', question: "Instrumento √≥ptico para ver de lejos (Lupa es cerca).", answer: "Catalejo" }, /* C. L: Lejania? No. L: Larga-vista. */
                { id: 'L', question: "Lugar donde se guardan los libros.", answer: "Libreria" } /* O Biblioteca. */
            ],
            M: [
                { id: 'M', question: "Capital de Espa√±a.", answer: "Madrid" },
                { id: 'M', question: "Ciencia que estudia los n√∫meros.", answer: "Matematicas" },
                { id: 'M', question: "Periodo hist√≥rico despu√©s de la Edad Antigua.", answer: "Medieval" },
                { id: 'M', question: "Persona que muere por defender sus creencias.", answer: "Martir" },
                { id: 'M', question: "Movimiento s√≠smico de la corteza terrestre.", answer: "Terremoto" }, /* T. M: Mareamoto. */
                { id: 'M', question: "Ola gigante provocada por un sismo submarino.", answer: "Maremoto" },
                { id: 'M', question: "Planeta rojo.", answer: "Marte" },
                { id: 'M', question: "Relato fant√°stico que explica el origen del mundo.", answer: "Mito" },
                { id: 'M', question: "Instrumento para orientarse que se√±ala el norte... Ah, br√∫jula. M: Mapa.", answer: "Mapa" }
            ],
            N: [
                { id: 'N', question: "Narraci√≥n extensa de ficci√≥n en prosa.", answer: "Novela" },
                { id: 'N', question: "Estado de la atm√≥sfera con muchas nubes.", answer: "Nuboso" },
                { id: 'N', question: "Ave nocturna de grandes ojos... B√∫ho. N: Noct√°mbulo.", answer: "Noctambulo" },
                { id: 'N', question: "Gas noble usado en luces de colores.", answer: "Neon" },
                { id: 'N', question: "Capital de Kenia.", answer: "Nairobi" },
                { id: 'N', question: "Que no es ni positivo ni negativo (carga).", answer: "Neutro" },
                { id: 'N', question: "Embarcaci√≥n que naufraga.", answer: "Naufrago" },
                { id: 'N', question: "Punto cardinal opuesto al Sur.", answer: "Norte" }
            ],
            √ë: [
                { id: '√ë', question: "Contiene √ë: Ave zancuda que anida en torres.", answer: "Cigue√±a" },
                { id: '√ë', question: "Contiene √ë: Mam√≠fero africano similar al buey.", answer: "√ëu" },
                { id: '√ë', question: "Contiene √ë: Habilidad o destreza para hacer algo.", answer: "Ma√±a" },
                { id: '√ë', question: "Contiene √ë: Tubo por donde salen los residuos del cuerpo (ri√±ones... no). Ca√±er√≠a.", answer: "Ca√±eria" },
                { id: '√ë', question: "Contiene √ë: Estaci√≥n del a√±o donde caen las hojas.", answer: "Oto√±o" },
                { id: '√ë', question: "Contiene √ë: Ar√°cnido de ocho patas.", answer: "Ara√±a" },
                { id: '√ë', question: "Contiene √ë: Fruta tropical con corona.", answer: "Pi√±a" },
                { id: '√ë', question: "Contiene √ë: Excremento de las aves (guano). No. Mier... no. √ë: Bo√±iga (vaca).", answer: "Bo√±iga" }
            ],
            O: [
                { id: 'O', question: "Metal precioso de color amarillo.", answer: "Oro" },
                { id: 'O', question: "Ciencia que estudia los ojos.", answer: "Oftalmologia" },
                { id: 'O', question: "Que lo sabe todo (atributo divino).", answer: "Omnisciente" },
                { id: 'O', question: "Masa de agua salada que cubre gran parte de la Tierra.", answer: "Oceano" },
                { id: 'O', question: "Contrario al este.", answer: "Oeste" },
                { id: 'O', question: "Instrumento musical de viento y teclado grande (iglesias).", answer: "Organo" },
                { id: 'O', question: "Mam√≠fero australiano con pico de pato.", answer: "Ornitorrinco" },
                { id: 'O', question: "Abertura de la nariz.", answer: "Orificio" }
            ],
            P: [
                { id: 'P', question: "Ciencia que estudia la mente humana.", answer: "Psicologia" },
                { id: 'P', question: "Capital de Francia.", answer: "Paris" },
                { id: 'P', question: "Edificio para el culto de los dioses en la antig√ºedad (Atenas).", answer: "Partenon" },
                { id: 'P', question: "Conjunto de islas.", answer: "Archipielago" }, /* A. P: Peninsula. */
                { id: 'P', question: "Tierra rodeada de agua por todas partes menos por una.", answer: "Peninsula" },
                { id: 'P', question: "Acci√≥n de copiar obras ajenas d√°ndolas como propias.", answer: "Plagio" },
                { id: 'P', question: "Pintor espa√±ol creador del Cubismo.", answer: "Picasso" },
                { id: 'P', question: "Monte m√°s alto de los Pirineos.", answer: "Aneto" }, /* A. P: Pirineos. P: Pico. */
                { id: 'P', question: "Monta√±a de forma c√≥nica (generalmente volc√°nica).", answer: "Pico" }
            ],
            Q: [
                { id: 'Q', question: "Ciencia que estudia la materia y sus transformaciones.", answer: "Quimica" },
                { id: 'Q', question: "Libro m√°s famoso de la literatura espa√±ola (El...).", answer: "Quijote" },
                { id: 'Q', question: "Sala de operaciones en un hospital.", answer: "Quirofano" },
                { id: 'Q', question: "Que se queja mucho.", answer: "Quejica" },
                { id: 'Q', question: "Hacer fuego o destruir con fuego.", answer: "Quemar" },
                { id: 'Q', question: "Parte de la biolog√≠a que estudia los quir√≥pteros (murci√©lagos). No. Q: Quorum.", answer: "Quorum" },
                { id: 'Q', question: "N√∫mero de individuos necesario para tomar acuerdos.", answer: "Quorum" },
                { id: 'Q', question: "Instrumento musical de viento andino.", answer: "Quena" }
            ],
            R: [
                { id: 'R', question: "Capital de Italia.", answer: "Roma" },
                { id: 'R', question: "√âpoca de esplendor cultural en Europa (S. XV-XVI).", answer: "Renacimiento" },
                { id: 'R', question: "Animal que roe.", answer: "Roedor" },
                { id: 'R', question: "L√≠nea de luz que procede de un cuerpo luminoso.", answer: "Rayo" },
                { id: 'R', question: "Pa√≠s m√°s extenso del mundo.", answer: "Rusia" },
                { id: 'R', question: "Volver a nacer o tomar fuerzas.", answer: "Renacer" },
                { id: 'R', question: "Conjunto de reglas o normas.", answer: "Reglamento" },
                { id: 'R', question: "Copia exacta de una obra art√≠stica.", answer: "Replica" }
            ],
            S: [
                { id: 'S', question: "Astro rey del sistema solar.", answer: "Sol" },
                { id: 'S', question: "Siglo XIX (movimiento art√≠stico).", answer: "Romanticismo" }, /* R. S: Simbolismo. S: Siglo. */
                { id: 'S', question: "Periodo de cien a√±os.", answer: "Siglo" },
                { id: 'S', question: "Instrumento de viento (metal) parecido a la trompeta.", answer: "Saxon" }, /* No. S: Saxofon. */
                { id: 'S', question: "Instrumento musical de viento inventado por Adolphe Sax.", answer: "Saxofon" },
                { id: 'S', question: "Capital de Chile.", answer: "Santiago" },
                { id: 'S', question: "Falta de ruido.", answer: "Silencio" },
                { id: 'S', question: "L√≠quido vital rojo.", answer: "Sangre" },
                { id: 'S', question: "Reptil que se arrastra.", answer: "Serpiente" }
            ],
            T: [
                { id: 'T', question: "Instrumento para observar astros lejanos.", answer: "Telescopio" },
                { id: 'T', question: "Fen√≥meno meteorol√≥gico con rayos y truenos.", answer: "Tormenta" },
                { id: 'T', question: "Capital de Jap√≥n.", answer: "Tokio" },
                { id: 'T', question: "Mam√≠fero carn√≠voro de piel rayada.", answer: "Tigre" },
                { id: 'T', question: "Texto escrito para ser representado (g√©nero).", answer: "Teatro" },
                { id: 'T', question: "Ciencia que trata de Dios.", answer: "Teologia" },
                { id: 'T', question: "Hueso de la pierna (junto al peron√©).", answer: "Tibia" },
                { id: 'T', question: "Tri√°ngulo con tres lados iguales.", answer: "Equilatero" }, /* E. T: Trigono? No. T: Tres. */
                { id: 'T', question: "Instrumento de percusi√≥n (redoblante).", answer: "Tambor" }
            ],
            U: [
                { id: 'U', question: "Conjunto de todo lo que existe.", answer: "Universo" },
                { id: 'U', question: "Pa√≠s de Am√©rica del Sur, capital Montevideo.", answer: "Uruguay" },
                { id: 'U', question: "Elemento qu√≠mico de s√≠mbolo U.", answer: "Uranio" },
                { id: 'U', question: "Que es √∫nico en su especie.", answer: "Unico" },
                { id: 'U', question: "Instituci√≥n de ense√±anza superior.", answer: "Universidad" },
                { id: 'U', question: "Herramienta para untar.", answer: "Untador" }, /* No. U: Utensilio. */
                { id: 'U', question: "Objeto fabricado para un uso determinado.", answer: "Utensilio" },
                { id: 'U', question: "M√≠tico caballo con un cuerno.", answer: "Unicornio" }
            ],
            V: [
                { id: 'V', question: "Capital de Austria.", answer: "Viena" },
                { id: 'V', question: "Mam√≠fero volador (el √∫nico).", answer: "Murcielago" }, /* M. V: Vampiro. */
                { id: 'V', question: "Ser mitol√≥gico que se alimenta de sangre.", answer: "Vampiro" },
                { id: 'V', question: "Rapidez en el movimiento.", answer: "Velocidad" },
                { id: 'V', question: "Planeta vecino a la Tierra (el segundo).", answer: "Venus" },
                { id: 'V', question: "Volc√°n famoso de Italia (Pompeya).", answer: "Vesubio" },
                { id: 'V', question: "Contrario de mentira.", answer: "Verdad" },
                { id: 'V', question: "Instrumento de cuerda frotada.", answer: "Violin" }
            ],
            X: [
                { id: 'X', question: "Instrumento musical de percusi√≥n con l√°minas de madera.", answer: "Xilofono" },
                { id: 'X', question: "Miedo a los extranjeros.", answer: "Xenofobia" },
                { id: 'X', question: "Contiene X: Gas necesario para respirar.", answer: "Oxigeno" },
                { id: 'X', question: "Contiene X: Que es de fuera del pa√≠s.", answer: "Extranjero" },
                { id: 'X', question: "Contiene X: Planeta o cuerpo celeste fuera del sistema solar.", answer: "Exoplaneta" },
                { id: 'X', question: "Contiene X: Sexto d√≠a de la semana... ah no. X: Sexto.", answer: "Sexto" },
                { id: 'X', question: "Contiene X: Explicaci√≥n o comentario de un texto.", answer: "Exegesis" }
            ],
            Y: [
                { id: 'Y', question: "Hembra del caballo.", answer: "Yegua" },
                { id: 'Y', question: "Parte amarilla del huevo.", answer: "Yema" },
                { id: 'Y', question: "Deporte o disciplina f√≠sica y mental de la India.", answer: "Yoga" },
                { id: 'Y', question: "Embarcaci√≥n de recreo de lujo.", answer: "Yate" },
                { id: 'Y', question: "Bloque de hierro usado por los herreros.", answer: "Yunque" },
                { id: 'Y', question: "Contiene Y: T√≠tulo de soberano en algunos pa√≠ses (Re...).", answer: "Rey" },
                { id: 'Y', question: "Contiene Y: Mam√≠fero c√°nido salvaje (parecido al lobo).", answer: "Coyote" }
            ],
            Z: [
                { id: 'Z', question: "Ciencia que estudia los animales.", answer: "Zoologia" },
                { id: 'Z', question: "Lugar donde se exhiben animales.", answer: "Zoo" },
                { id: 'Z', question: "Baile popular espa√±ol (y g√©nero musical).", answer: "Zarzuela" },
                { id: 'Z', question: "Mam√≠fero carn√≠voro astuto.", answer: "Zorro" },
                { id: 'Z', question: "Calzado que no cubre el tal√≥n.", answer: "Zueco" },
                { id: 'Z', question: "Mineral precioso de color azul... Zafiro.", answer: "Zafiro" },
                { id: 'Z', question: "Zona clim√°tica templada.", answer: "Zona" }
            ]
        };

        // --- LOGICA ROSCO ---
        let currentQuestions = [];
        let currentIndex = 0;
        let score = 0;
        let errors = 0;
        let timer;
        let timeLeft = 180;

        const circle = document.getElementById('circle');
        const definitionText = document.getElementById('definition-text');
        const currentLetterDisplay = document.getElementById('current-letter-display');
        const inputAnswer = document.getElementById('user-answer');
        const timerDisplay = document.getElementById('timer');
        const scoreDisplay = document.getElementById('menu-record');
        const welcomeScreen = document.getElementById('welcome-screen');
        const gameScreen = document.getElementById('game-screen');
        const endScreen = document.getElementById('end-screen');

        if (scoreDisplay) scoreDisplay.innerText = localStorage.getItem('roscoRecord') || 0;

        document.getElementById('start-btn').addEventListener('click', startRoscoGame);
        document.getElementById('new-game-btn').addEventListener('click', startRoscoGame);
        document.getElementById('check-btn').addEventListener('click', checkRoscoAnswer);
        document.getElementById('pasapalabra-btn').addEventListener('click', doPasapalabra);

        inputAnswer.addEventListener('keypress', function (e) { if (e.key === 'Enter') checkRoscoAnswer(); });

        function generateRosco() {
            const letters = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "L", "M", "N", "√ë", "O", "P", "Q", "R", "S", "T", "U", "V", "X", "Y", "Z"];
            const newRosco = [];
            letters.forEach(letter => {
                const options = questionsPool[letter];
                if(options) {
                    const randomQuestion = options[Math.floor(Math.random() * options.length)];
                    newRosco.push({ id: randomQuestion.id, question: randomQuestion.question, answer: randomQuestion.answer, status: null });
                }
            });
            return newRosco;
        }

        function startRoscoGame() {
            currentQuestions = generateRosco();
            currentIndex = 0; score = 0; errors = 0; timeLeft = 180;
            
            welcomeScreen.classList.add('hidden');
            endScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            
            inputAnswer.value = ''; 
            inputAnswer.focus();
            renderCircle(); loadQuestion(); startTimer();
        }

        function renderCircle() {
            circle.innerHTML = '';
            const total = currentQuestions.length;
            const radius = 250; 
            currentQuestions.forEach((item, index) => {
                const li = document.createElement('li');
                li.classList.add('letter-item'); li.id = `letter-${index}`; li.innerText = item.id;
                const angle = (360 / total) * index;
                const radian = angle * (Math.PI / 180);
                const x = radius * Math.cos(radian);
                const y = radius * Math.sin(radian);
                li.style.transform = `translate(${x}px, ${y}px) rotate(90deg)`; 
                circle.appendChild(li);
            });
        }

        function loadQuestion() {
            if (currentIndex >= currentQuestions.length) {
                const pendingIndex = currentQuestions.findIndex(q => q.status === null);
                if (pendingIndex !== -1) currentIndex = pendingIndex; 
                else { endRoscoGame(); return; }
            }
            if (currentQuestions[currentIndex].status !== null) {
                let found = false;
                for (let i = currentIndex; i < currentQuestions.length; i++) {
                    if (currentQuestions[i].status === null) { currentIndex = i; found = true; break; }
                }
                if (!found) {
                    for (let i = 0; i < currentQuestions.length; i++) {
                        if (currentQuestions[i].status === null) { currentIndex = i; found = true; break; }
                    }
                }
                if (!found) { endRoscoGame(); return; }
            }
            const currentQ = currentQuestions[currentIndex];
            definitionText.innerText = currentQ.question;
            currentLetterDisplay.innerText = currentQ.id;
            document.querySelectorAll('.letter-item').forEach(l => l.classList.remove('active'));
            document.getElementById(`letter-${currentIndex}`).classList.add('active');
        }

        function normalizeString(str) {
            return str.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").trim();
        }

        function checkRoscoAnswer() {
            const userAnswer = normalizeString(inputAnswer.value);
            const correctAnswer = normalizeString(currentQuestions[currentIndex].answer);
            const letterElement = document.getElementById(`letter-${currentIndex}`);
            if (userAnswer === correctAnswer) {
                score++; currentQuestions[currentIndex].status = 'correct';
                letterElement.classList.add('correct'); letterElement.classList.remove('active');
            } else {
                errors++; currentQuestions[currentIndex].status = 'wrong';
                letterElement.classList.add('wrong'); letterElement.classList.remove('active');
            }
            inputAnswer.value = ''; currentIndex++; loadQuestion();
        }

        function doPasapalabra() {
            inputAnswer.value = '';
            document.getElementById(`letter-${currentIndex}`).classList.remove('active');
            currentIndex++; loadQuestion();
        }

        function startTimer() {
            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--; 
                timerDisplay.innerText = timeLeft;
                if (timeLeft <= 0) endRoscoGame();
            }, 1000);
        }

        function endRoscoGame() {
            clearInterval(timer);
            gameScreen.classList.add('hidden');
            endScreen.classList.remove('hidden');
            
            // Mostrar Puntuaci√≥n Num√©rica
            document.getElementById('score-correct').innerText = score;
            document.getElementById('score-wrong').innerText = errors;
            
            // GENERAR RESUMEN DETALLADO
            const summaryContainer = document.getElementById('rosco-summary');
            summaryContainer.innerHTML = ''; // Limpiar anterior

            currentQuestions.forEach(item => {
                const div = document.createElement('div');
                div.classList.add('summary-item');
                
                let icon = '';
                let statusClass = '';
                
                if (item.status === 'correct') {
                    icon = '‚úÖ';
                    statusClass = 'sum-correct';
                } else if (item.status === 'wrong') {
                    icon = '‚ùå';
                    statusClass = 'sum-wrong';
                } else {
                    icon = '‚è≥ (Pasada/Tiempo)';
                    statusClass = 'sum-pending';
                }

                div.innerHTML = `
                    <span class="${statusClass}">${item.id} ${icon}</span> 
                    <strong>${item.answer}</strong><br>
                    <small style="color:#aaa;">${item.question}</small>
                `;
                summaryContainer.appendChild(div);
            });

            // Guardar R√©cord
            const currentRecord = localStorage.getItem('roscoRecord') || 0;
            if (score > currentRecord) {
                localStorage.setItem('roscoRecord', score);
                scoreDisplay.innerText = score;
            }
        }
    </script>
</body>
</html>
